/* eslint-disable @typescript-eslint/no-explicit-any */
import React, { useMemo, useState } from 'react';
import { Modal, Input, ColorPicker } from 'antd';
import * as LucideIcons from 'lucide-react';

interface AddDimensionModalProps {
  open: boolean;
  onCancel: () => void;
  onSubmit: (data: { title: string; color: string; icon: string }) => void;
}

const commonIconNames = [
  'Palette',
  'Heart',
  'Star',
  'Camera',
  'Calendar',
  'CheckCircle',
  'Home',
  'Settings',
  'User',
  'Dashboard'
];

const allIconNames = [
  'Gauge',
  'Palette',
  'Heart',
  'Star',
  'Camera',
  'Calendar',
  'CheckCircle',
  'Home',
  'Settings',
  'User',
  'Users',
  'Book',
  'Brain',
  'Trophy',
  'Zap',
  'Flame',
  'Sun',
  'Moon',
  'Cloud',
  'Rain',
  'Snow',
  'Wind',
  'Thunder',
  'CloudLightning',
  'CloudRain',
  'CloudSnow',
  'CloudWind',
  'Sunrise',
  'Sunset',
  'ArrowRight',
  'ArrowLeft',
  'ArrowUp',
  'ArrowDown',
  'ArrowRightLeft',
  'ArrowUpDown',
  'ArrowRightCircle',
  'ArrowLeftCircle',
  'ArrowUpCircle',
  'ArrowDownCircle',
  'ArrowRightSquare',
  'ArrowLeftSquare',
  'ArrowUpSquare',
  'ArrowDownSquare',
  'ArrowRightToLine',
  'ArrowLeftToLine',
  'ArrowUpToLine',
  'ArrowDownToLine',
  'ArrowRightFromLine',
  'ArrowLeftFromLine',
  'ArrowUpFromLine',
  'ArrowDownFromLine',
  'ChevronRight',
  'ChevronLeft',
  'ChevronUp',
  'ChevronDown',
  'ChevronRightSquare',
  'ChevronLeftSquare',
  'ChevronUpSquare',
  'ChevronDownSquare',
  'ChevronRightCircle',
  'ChevronLeftCircle',
  'ChevronUpCircle',
  'ChevronDownCircle',
  'CaretRight',
  'CaretLeft',
  'CaretUp',
  'CaretDown',
  'CaretRightSquare',
  'CaretLeftSquare',
  'CaretUpSquare',
  'CaretDownSquare',
  'Check',
  'X',
  'Plus',
  'Minus',
  'Menu',
  'Search',
  'Bell',
  'Mail',
  'UserCircle',
  'LogOut',
  'LogIn',
  'Edit',
  'Trash',
  'Save',
  'Download',
  'Upload',
  'Refresh',
  'ExternalLink',
  'Eye',
  'EyeOff',
  'Lock',
  'Unlock',
  'Copy',
  'Paste',
  'Cut',
  'Undo',
  'Redo',
  'RotateCcw',
  'RotateCw',
  'ZoomIn',
  'ZoomOut',
  'Maximize',
  'Minimize',
  'Move',
  'Resize',
  'Crop',
  'Paintbrush',
  'Eraser',
  'Layers',
  'Layout',
  'Settings2',
  'Cog',
  'Sliders',
  'Filter',
  'Grid',
  'List',
  'AlertCircle',
  'AlertTriangle',
  'AlertOctagon',
  'Info',
  'HelpCircle',
  'QuestionMark',
  'ExclamationMark',
  'CheckCircle2',
  'XCircle',
  'PlusCircle',
  'MinusCircle',
  'InfoCircle',
  'BarChart',
  'PieChart',
  'LineChart',
  'Activity',
  'AreaChart',
  'BarChart3',
  'BarChart2',
  'PieChart2',
  'LineChart2',
  'Activity2',
  'AreaChart2',
  'BarChart4',
  'PieChart3',
  'LineChart3',
  'Activity3',
  'AreaChart3',
  'TrendingUp',
  'TrendingDown',
  'TrendingRight',
  'TrendingLeft',
  'ArrowUpRight',
  'ArrowDownRight',
  'ArrowUpLeft',
  'ArrowDownLeft',
  'Clock',
  'Clock2',
  'Clock3',
  'Clock4',
  'Clock5',
  'Clock6',
  'Clock7',
  'Clock8',
  'Clock9',
  'Clock10',
  'Clock11',
  'Clock12',
  'CalendarDays',
  'CalendarRange',
  'CalendarClock',
  'CalendarCheck',
  'CalendarPlus',
  'CalendarMinus',
  'CalendarX',
  'CalendarEdit',
  'Timer',
  'TimerReset',
  'Stopwatch',
  'Hourglass',
  'HourglassStart',
  'HourglassEnd',
  'Map',
  'Compass',
  'Target',
  'MapPin',
  'MapPinned',
  'MapSearch',
  'MapPinOff',
  'Location',
  'LocationOff',
  'LocationPin',
  'LocationPlus',
  'LocationMinus',
  'LocationX',
  'LocationSearch',
  'Route',
  'Navigation',
  'Compass2',
  'Target2',
  'Bullseye',
  'Award',
  'Medal',
  'Cup',
  'StarHalf',
  'StarOff',
  'HeartOff',
  'HeartHandshake',
  'HeartCrack',
  'HeartPulse',
  'Gift',
  'Present',
  'Award2',
  'Medal2',
  'BookOpen',
  'BookMarked',
  'BookMarkedOpen',
  'BookText',
  'BookCheck',
  'BookX',
  'BookPlus',
  'BookMinus',
  'BookEdit',
  'BookMark',
  'BookMarks',
  'Library',
  'GraduationCap',
  'School',
  'Education',
  'Lightbulb',
  'LightbulbOff',
  'BrainCircuit',
  'BrainCog',
  'BrainOff',
  'Puzzle',
  'PuzzlePiece',
  'Code',
  'Code2',
  'Code3',
  'Terminal',
  'Command',
  'Keyboard',
  'Monitor',
  'Laptop',
  'Tablet',
  'Smartphone',
  'Watch',
  'Tv',
  'Server',
  'Database',
  'Database2',
  'DatabaseBackup',
  'DatabaseRestore',
  'DatabaseImport',
  'DatabaseExport',
  'DatabaseSearch',
  'DatabaseCheck',
  'DatabaseX',
  'DatabasePlus',
  'DatabaseMinus',
  'CloudUpload',
  'CloudDownload',
  'CloudSync',
  'CloudCheck',
  'CloudX',
  'CloudPlus',
  'CloudMinus',
  'CloudOff',
  'CloudFog',
  'CloudSun',
  'CloudMoon',
  'Server2',
  'ServerCog',
  'ServerCrash',
  'ServerOff',
  'Network',
  'Network2',
  'Wifi',
  'WifiOff',
  'Bluetooth',
  'BluetoothOff',
  'Cable',
  'Plug',
  'Socket',
  'Battery',
  'BatteryLow',
  'BatteryMedium',
  'BatteryHigh',
  'BatteryCharging',
  'BatteryChargingLow',
  'BatteryChargingMedium',
  'BatteryChargingHigh',
  'BatteryFull',
  'BatteryEmpty',
  'File',
  'File2',
  'FileText',
  'FileText2',
  'FileCode',
  'FileCode2',
  'FileJson',
  'FileXml',
  'FileCss',
  'FileHtml',
  'FilePdf',
  'FileImage',
  'FileImage2',
  'FileVideo',
  'FileVideo2',
  'FileMusic',
  'FileMusic2',
  'FileArchive',
  'FileArchive2',
  'FileZip',
  'FileZip2',
  'FileCog',
  'FileSearch',
  'FileCheck',
  'FileX',
  'FilePlus',
  'FileMinus',
  'FileEdit',
  'FileExport',
  'FileImport',
  'FileDownload',
  'FileUpload',
  'FileShare',
  'FileCopy',
  'FileMove',
  'FileSymlink',
  'FileDiff',
  'Folder',
  'Folder2',
  'FolderOpen',
  'FolderOpen2',
  'FolderPlus',
  'FolderMinus',
  'FolderX',
  'FolderEdit',
  'FolderCheck',
  'FolderSearch',
  'FolderDownload',
  'FolderUpload',
  'FolderShare',
  'FolderCopy',
  'FolderMove',
  'FolderSymlink',
  'FolderTree',
  'FolderGrid',
  'Bookmark',
  'Bookmark2',
  'BookmarkCheck',
  'BookmarkX',
  'BookmarkPlus',
  'BookmarkMinus',
  'BookmarkEdit',
  'Tag',
  'Tag2',
  'TagCheck',
  'TagX',
  'TagPlus',
  'TagMinus',
  'TagEdit',
  'Hash',
  'Hash2',
  'Hash3',
  'MessageSquare',
  'MessageSquare2',
  'MessageCircle',
  'MessageCircle2',
  'Chat',
  'Chat2',
  'ChatCircle',
  'ChatCircle2',
  'Comment',
  'Comment2',
  'CommentCircle',
  'CommentCircle2',
  'Send',
  'Send2',
  'Reply',
  'Reply2',
  'Forward',
  'Forward2',
  'Share2',
  'Share',
  'Copy2',
  'Paste2',
  'Cut2',
  'Undo2',
  'Redo2',
  'Quote',
  'Quote2',
  'AtSign',
  'Link2',
  'Link',
  'Mail2',
  'MailPlus',
  'MailMinus',
  'MailCheck',
  'MailX',
  'MailEdit',
  'MailSend',
  'MailReply',
  'MailReplyAll',
  'MailForward',
  'MailOpen',
  'Mailbox',
  'MailboxOpen',
  'MailboxCheck',
  'MailboxX',
  'Inbox',
  'InboxOpen',
  'InboxCheck',
  'InboxX',
  'InboxPlus',
  'InboxMinus',
  'Outbox',
  'OutboxOpen',
  'OutboxCheck',
  'OutboxX',
  'Drafts',
  'DraftsOpen',
  'Sent',
  'SentOpen',
  'User2',
  'UserCircle2',
  'UserSquare',
  'UserSquare2',
  'Users2',
  'UsersRound',
  'UsersRound2',
  'UserPlus',
  'UserMinus',
  'UserX',
  'UserCheck',
  'UserEdit',
  'UserCog',
  'UserSettings',
  'UserSearch',
  'UserShield',
  'UserLock',
  'UserUnlock',
  'UserAstronaut',
  'UserDoctor',
  'UserNurse',
  'UserTeacher',
  'UserStudent',
  'UserBuilder',
  'UserPolice',
  'UserFirefighter',
  'UserCook',
  'UserWaiter',
  'UserMusician',
  'UserActor',
  'UserArtist',
  'UserWriter',
  'UserDeveloper',
  'UserTie',
  'UserSuit',
  'UserPilot',
  'UserBanknote',
  'UsersPlus',
  'UsersMinus',
  'UsersX',
  'UsersCheck',
  'Shield',
  'Shield2',
  'ShieldCheck',
  'ShieldCheck2',
  'ShieldAlert',
  'ShieldAlert2',
  'ShieldLock',
  'ShieldLock2',
  'ShieldUnlock',
  'ShieldUnlock2',
  'ShieldKeyhole',
  'ShieldKeyhole2',
  'ShieldX',
  'ShieldX2',
  'ShieldOff',
  'ShieldOff2',
  'Lock2',
  'LockKeyhole',
  'LockKeyhole2',
  'LockSquare',
  'LockSquare2',
  'LockCircle',
  'LockCircle2',
  'Unlock2',
  'UnlockKeyhole',
  'UnlockKeyhole2',
  'UnlockSquare',
  'UnlockSquare2',
  'UnlockCircle',
  'UnlockCircle2',
  'Key',
  'Key2',
  'KeySquare',
  'KeySquare2',
  'KeyCircle',
  'KeyCircle2',
  'Keyhole',
  'Keyhole2',
  'Fingerprint',
  'Fingerprint2',
  'BadgeCheck',
  'BadgeX',
  'BadgePlus',
  'BadgeMinus',
  'BadgeEdit',
  'BadgeDollarSign',
  'BadgeEuroSign',
  'BadgePoundSign',
  'BadgeYenSign',
  'BadgeRubelSign',
  'BadgeFrancSign',
  'BadgeRupeeSign',
  'BadgeBahtSign',
  'BadgeWonSign',
  'Smartphone2',
  'SmartphoneCharging',
  'SmartphoneOff',
  'Tablet2',
  'TabletCharging',
  'TabletOff',
  'Laptop2',
  'LaptopCharging',
  'LaptopOff',
  'Monitor2',
  'MonitorSmartphone',
  'MonitorLaptop',
  'Tv2',
  'TvOff',
  'Camera2',
  'CameraOff',
  'CameraPlus',
  'CameraMinus',
  'CameraCheck',
  'CameraX',
  'CameraRotate',
  'CameraZoomIn',
  'CameraZoomOut',
  'Video',
  'Video2',
  'VideoOff',
  'VideoPlus',
  'VideoMinus',
  'VideoCheck',
  'VideoX',
  'Microphone',
  'Microphone2',
  'MicrophoneOff',
  'MicrophoneOff2',
  'Headphones',
  'Headphones2',
  'HeadphonesOff',
  'Speaker',
  'Speaker2',
  'SpeakerOff',
  'SpeakerX',
  'SpeakerX2',
  'Volume2',
  'VolumeX',
  'Volume1',
  'Volume3',
  'VolumeX2',
  'Watch2',
  'WatchOff',
  'WatchSmart',
  'WatchSmart2',
  'Projector',
  'Projector2',
  'ProjectorOff',
  'Printer',
  'Printer2',
  'PrinterOff',
  'Scanner',
  'Scanner2',
  'ScannerOff',
  'Fax',
  'Fax2',
  'FaxOff',
  'Phone',
  'Phone2',
  'PhoneCall',
  'PhoneCall2',
  'PhoneMissed',
  'PhoneMissed2',
  'PhoneOff',
  'PhoneOff2',
  'PhoneForwarded',
  'PhoneForwarded2',
  'PhoneIncoming',
  'PhoneIncoming2',
  'PhoneOutgoing',
  'PhoneOutgoing2',
  'PhonePause',
  'PhonePause2',
  'PhoneX',
  'PhoneX2',
  'PhonePlus',
  'PhonePlus2',
  'PhoneMinus',
  'PhoneMinus2',
  'PhoneCheck',
  'PhoneCheck2',
  'GitBranch',
  'GitBranch2',
  'GitPullRequest',
  'GitPullRequest2',
  'GitCommit',
  'GitCommit2',
  'GitMerge',
  'GitMerge2',
  'GitPush',
  'GitPush2',
  'GitPull',
  'GitPull2',
  'GitCompare',
  'GitCompare2',
  'GitCheckout',
  'GitCheckout2',
  'GitReset',
  'GitReset2',
  'GitTag',
  'GitTag2',
  'GitStaged',
  'GitStaged2',
  'GitUnstaged',
  'GitUnstaged2',
  'GitUntracked',
  'GitUntracked2',
  'GitIgnored',
  'GitIgnored2',
  'GitConflict',
  'GitConflict2',
  'GitCherryPick',
  'GitCherryPick2',
  'Palette2',
  'Paintbrush2',
  'PaintBucket',
  'PaintBucket2',
  'Eraser2',
  'Pencil',
  'Pencil2',
  'PencilLine',
  'PencilLine2',
  'PencilRuler',
  'PencilRuler2',
  'PenTool',
  'PenTool2',
  'Brush',
  'Brush2',
  'SprayCan',
  'SprayCan2',
  'Crop2',
  'Crop3',
  'CropRotate',
  'CropRotate2',
  'Resize2',
  'Move2',
  'Move3',
  'RotateCcw2',
  'RotateCw2',
  'FlipHorizontal',
  'FlipHorizontal2',
  'FlipVertical',
  'FlipVertical2',
  'Layers2',
  'Layers3',
  'LayersCog',
  'LayersOff',
  'LayersOff2',
  'Layout2',
  'LayoutGrid',
  'LayoutGrid2',
  'LayoutList',
  'LayoutList2',
  'LayoutKanban',
  'LayoutKanban2',
  'LayoutPanelLeft',
  'LayoutPanelLeft2',
  'LayoutPanelRight',
  'LayoutPanelRight2',
  'LayoutPanelTop',
  'LayoutPanelTop2',
  'LayoutPanelBottom',
  'LayoutPanelBottom2',
  'LayoutDashboard',
  'LayoutDashboard2',
  'LayoutSidebarLeft',
  'LayoutSidebarRight',
  'LayoutSidebarLeftCollapse',
  'LayoutSidebarRightCollapse',
  'ToggleLeft',
  'ToggleRight',
  'ToggleLeft2',
  'ToggleRight2',
  'Switch',
  'Switch2',
  'Radio',
  'Radio2',
  'RadioCheck',
  'RadioCheck2',
  'Checkbox',
  'Checkbox2',
  'CheckboxCheck',
  'CheckboxCheck2',
  'CheckboxChecked',
  'CheckboxChecked2',
  'CheckboxUnchecked',
  'CheckboxUnchecked2',
  'CheckboxIndeterminate',
  'CheckboxIndeterminate2',
  'Square',
  'Square2',
  'SquareCheck',
  'SquareCheck2',
  'SquareX',
  'SquareX2',
  'SquarePlus',
  'SquarePlus2',
  'SquareMinus',
  'SquareMinus2',
  'SquareEdit',
  'SquareEdit2',
  'Circle',
  'Circle2',
  'CircleCheck',
  'CircleCheck2',
  'CircleX',
  'CircleX2',
  'CirclePlus',
  'CirclePlus2',
  'CircleMinus',
  'CircleMinus2',
  'CircleEdit',
  'CircleEdit2',
  'CircleDot',
  'CircleDot2',
  'CircleDollarSign',
  'CircleDollarSign2',
  'CircleEuroSign',
  'CircleEuroSign2',
  'CirclePoundSign',
  'CirclePoundSign2',
  'CircleYenSign',
  'CircleYenSign2',
  'CircleRupeeSign',
  'CircleRupeeSign2',
  'Star2',
  'StarHalf2',
  'StarOff2',
  'Heart2',
  'HeartOff2',
  'HeartPulse2',
  'HeartCrack2',
  'HeartHandshake2',
  'Diamond',
  'Diamond2',
  'DiamondOff',
  'DiamondOff2',
  'Gift2',
  'Present2',
  'Trophy2',
  'Cup2',
  'CupOff',
  'CupOff2',
  'Music',
  'Music2',
  'MusicOff',
  'MusicOff2',
  'Disc',
  'Disc2',
  'Play',
  'Play2',
  'PlayCircle',
  'PlayCircle2',
  'Pause',
  'Pause2',
  'PauseCircle',
  'PauseCircle2',
  'Stop',
  'Stop2',
  'StopCircle',
  'StopCircle2',
  'SkipForward',
  'SkipForward2',
  'SkipForwardCircle',
  'SkipForwardCircle2',
  'SkipBack',
  'SkipBack2',
  'SkipBackCircle',
  'SkipBackCircle2',
  'FastForward',
  'FastForward2',
  'FastForwardCircle',
  'FastForwardCircle2',
  'Rewind',
  'Rewind2',
  'RewindCircle',
  'RewindCircle2',
  'Shuffle',
  'Shuffle2',
  'Repeat',
  'Repeat2',
  'RepeatOnce',
  'RepeatOnce2',
  'Mic',
  'Mic2',
  'MicOff',
  'MicOff2',
  'Ear',
  'Ear2',
  'EarOff',
  'EarOff2',
  'Eye2',
  'EyeOff2',
  'EyeCheck',
  'EyeCheck2',
  'EyeX',
  'EyeX2',
  'Nose',
  'Nose2',
  'Mouth',
  'Mouth2',
  'MouthSmile',
  'MouthSmile2',
  'MouthFrown',
  'MouthFrown2',
  'MouthOpen',
  'MouthOpen2',
  'MouthClosed',
  'MouthClosed2',
  'Face',
  'Face2',
  'FaceSmile',
  'FaceSmile2',
  'FaceFrown',
  'FaceFrown2',
  'FaceNeutral',
  'FaceNeutral2',
  'FaceMeh',
  'FaceMeh2',
  'FaceSurprise',
  'FaceSurprise2',
  'FaceShocked',
  'FaceShocked2',
  'FaceSad',
  'FaceSad2',
  'FaceHappy',
  'FaceHappy2',
  'FaceAngry',
  'FaceAngry2',
  'FaceTired',
  'FaceTired2',
  'FaceSleepy',
  'FaceSleepy2',
  'FaceDizzy',
  'FaceDizzy2',
  'FaceIll',
  'FaceIll2',
  'FaceMask',
  'FaceMask2',
  'FaceMaskOff',
  'FaceMaskOff2',
  'Hand',
  'Hand2',
  'HandThumbUp',
  'HandThumbUp2',
  'HandThumbDown',
  'HandThumbDown2',
  'HandClap',
  'HandClap2',
  'HandHolding',
  'HandHolding2',
  'HandHoldingHeart',
  'HandHoldingHeart2',
  'HandHoldingGift',
  'HandHoldingGift2',
  'HandHoldingDroplet',
  'HandHoldingDroplet2',
  'HandHoldingSeedling',
  'HandHoldingSeedling2',
  'HandHoldingUsd',
  'HandHoldingUsd2',
  'HandCoins',
  'HandCoins2',
  'Handshake',
  'Handshake2',
  'HandshakeOff',
  'HandshakeOff2',
  'HandStop',
  'HandStop2',
  'HandBackFist',
  'HandBackFist2',
  'HandFist',
  'HandFist2',
  'HandPalm',
  'HandPalm2',
  'HandOpen',
  'HandOpen2',
  'HandPointingUp',
  'HandPointingUp2',
  'HandPointingRight',
  'HandPointingRight2',
  'HandPointingDown',
  'HandPointingDown2',
  'HandPointingLeft',
  'HandPointingLeft2',
  'HandPointingForward',
  'HandPointingForward2',
  'HandRock',
  'HandRock2',
  'HandScissors',
  'HandScissors2',
  'HandPaper',
  'HandPaper2',
  'HandLizard',
  'HandLizard2',
  'HandSpock',
  'HandSpock2',
  'HandFinger',
  'HandFinger2',
  'HandFingerUp',
  'HandFingerUp2',
  'HandFingerRight',
  'HandFingerRight2',
  'HandFingerDown',
  'HandFingerDown2',
  'HandFingerLeft',
  'HandFingerLeft2',
  'HandFingerForward',
  'HandFingerForward2',
  'HandThumb',
  'HandThumb2',
  'HandDoubleTap',
  'HandDoubleTap2',
  'HandTap',
  'HandTap2',
  'HandSwipeRight',
  'HandSwipeRight2',
  'HandSwipeLeft',
  'HandSwipeLeft2',
  'HandSwipeUp',
  'HandSwipeUp2',
  'HandSwipeDown',
  'HandSwipeDown2',
  'HandDrag',
  'HandDrag2',
  'HandGrab',
  'HandGrab2',
  'HandGrabbing',
  'HandGrabbing2',
  'HandMove',
  'HandMove2',
  'HandResize',
  'HandResize2',
  'HandCrop',
  'HandCrop2',
  'HandPaintbrush',
  'HandPaintbrush2',
  'HandEraser',
  'HandEraser2',
  'HandPencil',
  'HandPencil2',
  'HandPen',
  'HandPen2',
  'HandBrush',
  'HandBrush2',
  'HandSprayCan',
  'HandSprayCan2',
  'HandCropRotate',
  'HandCropRotate2',
  'HandFlipHorizontal',
  'HandFlipHorizontal2',
  'HandFlipVertical',
  'HandFlipVertical2',
  'HandRotateCcw',
  'HandRotateCcw2',
  'HandRotateCw',
  'HandRotateCw2',
  'HandZoomIn',
  'HandZoomIn2',
  'HandZoomOut',
  'HandZoomOut2',
  'HandMaximize',
  'HandMaximize2',
  'HandMinimize',
  'HandMinimize2',
  'HandLock',
  'HandLock2',
  'HandUnlock',
  'HandUnlock2',
  'HandKey',
  'HandKey2',
  'HandFingerprint',
  'HandFingerprint2',
  'HandShield',
  'HandShield2',
  'HandAlert',
  'HandAlert2',
  'HandCheck',
  'HandCheck2',
  'HandX',
  'HandX2',
  'HandPlus',
  'HandPlus2',
  'HandMinus',
  'HandMinus2',
  'HandEdit',
  'HandEdit2',
  'HandSearch',
  'HandSearch2',
  'HandFilter',
  'HandFilter2',
  'HandSliders',
  'HandSliders2',
  'HandGrid',
  'HandGrid2',
  'HandList',
  'HandList2',
  'HandLayout',
  'HandLayout2',
  'HandDashboard',
  'HandDashboard2',
  'HandPieChart',
  'HandPieChart2',
  'HandBarChart',
  'HandBarChart2',
  'HandLineChart',
  'HandLineChart2',
  'HandActivity',
  'HandActivity2',
  'HandTrendingUp',
  'HandTrendingUp2',
  'HandTrendingDown',
  'HandTrendingDown2',
  'HandTrendingRight',
  'HandTrendingRight2',
  'HandTrendingLeft',
  'HandTrendingLeft2',
  'HandCalendar',
  'HandCalendar2',
  'HandClock',
  'HandClock2',
  'HandTimer',
  'HandTimer2',
  'HandStopwatch',
  'HandStopwatch2',
  'HandHourglass',
  'HandHourglass2',
  'HandCompass',
  'HandCompass2',
  'HandMap',
  'HandMap2',
  'HandMapPin',
  'HandMapPin2',
  'HandLocation',
  'HandLocation2',
  'HandNavigation',
  'HandNavigation2',
  'HandTarget',
  'HandTarget2',
  'HandBullseye',
  'HandBullseye2',
  'HandAward',
  'HandAward2',
  'HandMedal',
  'HandMedal2',
  'HandTrophy',
  'HandTrophy2',
  'HandGift',
  'HandGift2',
  'HandPresent',
  'HandPresent2',
  'HandStar',
  'HandStar2',
  'HandHeart',
  'HandHeart2',
  'HandDiamond',
  'HandDiamond2',
  'HandMusic',
  'HandMusic2',
  'HandDisc',
  'HandDisc2',
  'HandPlay',
  'HandPlay2',
  'HandPause',
  'HandPause2',
  'HandSkipForward',
  'HandSkipForward2',
  'HandSkipBack',
  'HandSkipBack2',
  'HandFastForward',
  'HandFastForward2',
  'HandRewind',
  'HandRewind2',
  'HandShuffle',
  'HandShuffle2',
  'HandRepeat',
  'HandRepeat2',
  'HandVolume2',
  'HandVolumeX',
  'HandVolume1',
  'HandVolume3',
  'HandVolumeX2',
  'HandSpeaker',
  'HandSpeaker2',
  'HandSpeakerOff',
  'HandSpeakerX',
  'HandSpeakerX2',
  'HandMic',
  'HandMic2',
  'HandMicOff',
  'HandMicOff2',
  'HandHeadphones',
  'HandHeadphones2',
  'HandHeadphonesOff',
  'HandEar',
  'HandEar2',
  'HandEarOff',
  'HandEarOff2',
  'HandEye',
  'HandEye2',
  'HandEyeOff',
  'HandEyeOff2',
  'HandEyeCheck',
  'HandEyeCheck2',
  'HandEyeX',
  'HandEyeX2',
  'HandNose',
  'HandNose2',
  'HandMouth',
  'HandMouth2',
  'HandMouthSmile',
  'HandMouthSmile2',
  'HandMouthFrown',
  'HandMouthFrown2',
  'HandMouthOpen',
  'HandMouthOpen2',
  'HandMouthClosed',
  'HandMouthClosed2',
  'HandFace',
  'HandFace2',
  'HandFaceSmile',
  'HandFaceSmile2',
  'HandFaceFrown',
  'HandFaceFrown2',
  'HandFaceNeutral',
  'HandFaceNeutral2',
  'HandFaceMeh',
  'HandFaceMeh2',
  'HandFaceSurprise',
  'HandFaceSurprise2',
  'HandFaceShocked',
  'HandFaceShocked2',
  'HandFaceSad',
  'HandFaceSad2',
  'HandFaceHappy',
  'HandFaceHappy2',
  'HandFaceAngry',
  'HandFaceAngry2',
  'HandFaceTired',
  'HandFaceTired2',
  'HandFaceSleepy',
  'HandFaceSleepy2',
  'HandFaceDizzy',
  'HandFaceDizzy2',
  'HandFaceIll',
  'HandFaceIll2',
  'HandFaceMask',
  'HandFaceMask2',
  'HandFaceMaskOff',
  'HandFaceMaskOff2',
  'HandHand',
  'HandHand2'
];


const renderIcon = (name: string) => {
  // 使用类型断言确保TypeScript编译器不会报错
  const IconComponent = (LucideIcons as any)[name] || LucideIcons.Gauge;
  return <IconComponent size={18} />;
};

const AddDimensionModal: React.FC<AddDimensionModalProps> = ({
  open,
  onCancel,
  onSubmit,
}) => {
  const [title, setTitle] = useState('');
  const [color, setColor] = useState('#673ab7');
  const [selectedIcon, setSelectedIcon] = useState<string>('Palette');
  const [search, setSearch] = useState('');

  const filteredIconNames = useMemo(() => {
    const q = search.trim().toLowerCase();
    if (!q) {
      return commonIconNames;
    }
    
    // 搜索时使用所有图标进行过滤
    const filtered = allIconNames.filter((name) =>
      name.toLowerCase().includes(q)
    );
    
    // 排序：a开头的图标优先显示，然后是包含a但不是开头的，最后按字母顺序
    return filtered.sort((a, b) => {
      const aLower = a.toLowerCase();
      const bLower = b.toLowerCase();
      
      // 检查是否以搜索词开头
      const aStartsWith = aLower.startsWith(q);
      const bStartsWith = bLower.startsWith(q);
      
      if (aStartsWith && !bStartsWith) {
        return -1; // a开头的排在前面
      }
      if (!aStartsWith && bStartsWith) {
        return 1; // b开头的排在前面
      }
      
      // 都以搜索词开头或者都不以搜索词开头，按字母顺序排序
      return aLower.localeCompare(bLower);
    });
  }, [search]);

  const hasSearch = !!search.trim();

  const presetColors = [
    '#673ab7',
    '#7c3aed',
    '#a855f7',
    '#ef4444',
    '#f59e0b',
    '#22c55e',
    '#06b6d4',
    '#3b82f6',
    '#000000',
    '#f97171',
    '#facc15',
  ];

  const handleOk = () => {
    if (!title.trim()) return;
    onSubmit({
      title: title.trim(),
      color,
      icon: selectedIcon,
    });
  };



  return (
    <Modal
      title="添加维度"
      open={open}
      onCancel={onCancel}
      onOk={handleOk}
      okText="确定"
      cancelText="取消"
      okButtonProps={{ disabled: !title.trim() }}
      width={560}
    >
      <div style={{ display: 'flex', flexDirection: 'column', gap: 16 }}>
        {/* 维度名称 */}
        <div>
          <div style={{ marginBottom: 6, fontSize: 14, fontWeight: 500 }}>
            维度名称
          </div>
          <Input
            value={title}
            onChange={(e) => setTitle(e.target.value)}
            placeholder="例如：学习、健身、工作、娱乐"
            maxLength={20}
          />
        </div>

        {/* 颜色选择 */}
        <div>
          <div style={{ marginBottom: 6, fontSize: 14, fontWeight: 500 }}>
            维度颜色
          </div>
          <div style={{ display: 'flex', alignItems: 'center', gap: 12, flexWrap: 'wrap' }}>
            <ColorPicker
              value={color}
              onChange={(_, hex) => setColor(hex as string)}
              format="hex"
              showText
              disabledAlpha
            />
            <div style={{ display: 'flex', flexWrap: 'wrap', gap: 8 }}>
              {presetColors.map((c) => (
                <button
                  key={c}
                  onClick={() => setColor(c)}
                  style={{
                    width: 28,
                    height: 28,
                    borderRadius: 6,
                    border: color === c ? `2px solid ${c}` : '1px solid #d9d9d9',
                    backgroundColor: c,
                    cursor: 'pointer',
                    boxShadow: color === c ? '0 0 0 3px rgba(0,0,0,0.1)' : undefined,
                  }}
                />
              ))}
            </div>
          </div>
        </div>

        {/* 图标选择 */}
        <div>
          <div style={{ marginBottom: 6, fontSize: 14, fontWeight: 500 }}>
            维度图标
          </div>

          <Input
            value={search}
            onChange={(e) => setSearch(e.target.value)}
            placeholder="搜索图标名称（支持模糊搜索全部图标）"
            style={{ marginBottom: 12 }}
          />

          {!hasSearch && (
            <div style={{ fontSize: 13, color: '#6b7280', marginBottom: 8 }}>
              常用图标（支持搜索全部 {allIconNames.length} 个图标）
            </div>
          )}

          <div
            style={{
              display: 'grid',
              gridTemplateColumns: 'repeat(auto-fill, minmax(82px, 1fr))',
              gap: 8,
              maxHeight: 280,
              overflowY: 'auto',
              padding: '4px 8px 4px 0',
            }}
          >
            {/* 搜索框为空时只显示常用图标 */}
            {(hasSearch ? filteredIconNames : commonIconNames).map((name) => {
              const isSelected = selectedIcon === name;

              return (
                <button
                  key={name}
                  type="button"
                  onClick={() => setSelectedIcon(name)}
                  title={name}
                  style={{
                    padding: '8px 4px',
                    borderRadius: 8,
                    border: isSelected
                      ? `2px solid ${color}`
                      : '1px solid #e5e7eb',
                    backgroundColor: isSelected ? `${color}0f` : 'transparent',
                    cursor: 'pointer',
                    display: 'flex',
                    flexDirection: 'column',
                    alignItems: 'center',
                    justifyContent: 'center',
                    gap: 4,
                    transition: 'all 0.15s',
                    aspectRatio: '1 / 1',
                    outline: 'none',
                  }}
                >
                  <div
                    style={{
                      color: isSelected ? color : '#6b7280',
                      lineHeight: 1,
                    }}
                  >
                    {renderIcon(name)}
                  </div>
                  <span
                    style={{
                      fontSize: 11,
                      color: isSelected ? color : '#6b7280',
                      textAlign: 'center',
                      lineHeight: 1.2,
                      width: '100%',
                      overflow: 'hidden',
                      textOverflow: 'ellipsis',
                      whiteSpace: 'nowrap',
                    }}
                  >
                    {name}
                  </span>
                </button>
              );
            })}
          </div>


        </div>
      </div>
    </Modal>
  );
};

export default AddDimensionModal;
